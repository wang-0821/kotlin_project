* [1.shell概述](#1)
* [2.文件系统中跳转](#2)
* [3.操作文件和目录](#3)
* [4.使用命令](#4)
* [5.重定向](#5)
* [6.shell特性](#6)
* [7.键盘操作](#7)
* [8.权限](#8)
* [9.进程](#9)

<h2 id="1">1.Shell概述</h2>
&emsp;&emsp; bash是Bourne Again SHell的首字母缩写，bash是最初Unix上由Steve Bourne写成
shell程序sh的增强版。如果terminal提示符最后一个字符是"#"，而不是"$"，那么这个终端会话拥有超级用户权限，
这意味着我们或者是以root用户的身份登录，或者是我们选择的终端提供管理员权限。

<h2 id="2">2.文件系统中跳转</h2>
&emsp;&emsp; 类Unix操作系统，总是只有一个单一的文件系统树，不管有多少个磁盘或存储设备连接到计算机上，
存储设备都是挂载到目录树的各个节点上。

### 绝对路径与相对路径
&emsp;&emsp; 绝对路径开始于根目录，一直到达期望的目录或文件，用开头的"/"表示，如/usr/bin。
相对路径开始于工作目录，我们在文件系统树中用一对特殊符号来表示相对位置，"."指工作目录，
".."指工作目录的父目录，在几乎所有的情况下，可以省略"./"，它是隐含的。

### 长格式输出
&emsp;&emsp; "-l"选项以长格式输出，
        
        drwxr-xr-x   20 wlx  staff   640 Dec 22 14:15 sunspot
        lrwxrwxrwx 1 root root 11 2007-08-11 07:34 libc.so.6 -> libc-2.6.so
        drwxr-xr-x 对于文件的访问权限。第一个字符指明文件类型，"-"指普通文件，"d"指目录，"l"表示符号链接。
            其后的3个字符是文件所有者的访问权限，再其后3个字符是文件所属组中成员的访问权限，
            最后3个自符是其它所有人的访问权限。w表示写，r表示读，r表示可执行，-表示没有权限。
        20      表示文件的硬链接数目。
        wlx     表示文件所有者的用户名。
        staff   表示文件所属用户组的名字。
        640     表示文件的子节数。
        640 Dec 22 14:15    表示上次修改文件的时间和日期。
        sunspot 表示文件名。

<br>
&emsp;&emsp; 以"."字符开头的文件名是隐藏文件，ls不能列出它们，用ls -a命令就可以了。
        
        Linux一些目录：
        /               根目录。
        /bin            包含系统启动和运行所必须的二进制程序。
        /boot           包含内核、初始RAM磁盘映像和启动加载程序。
        /dev            包含设备结点的特殊目录。在这个目录里，内核维护着所有设备的列表。
        /etc            包含所有系统层面的配置文件。这个目录中的任何目录都应该是可读的文本文件。
        /home           系统会在/home下给每个用户分配一个目录。普通用户只能在自己的目录下写文件。
        /lib            包含核心系统程序所使用的共享库文件。
        /lost+found     每个使用Linux文件系统的格式化分区或设备，都会有这个目录。当部分恢复一个损坏的文件系统时，会用到这个目录。
        /media          会包含可移动介质的挂载点。USB驱动器等介质连接到计算机后，会自动挂载到这个目录结点下。
        /mnt            在早些的Linux系统中，/mnt目录包含可移动介质的挂载点。
        /opt            用来安装可选的软件，主要用来存储可能安装在系统中的商业软件产品。
        /proc           不是真正的文件系统，是一个由Linux内核维护的虚拟文件系统。包含的文件是内核的窥视孔，文件是可读的。
        /root           root账户的home目录。
        /sbin           包含系统二进制文件。是完成重大系统任务的程序，通常为超级用户保留。
        /tmp            用来存储由各种程序创建的临时文件的地方。一些配置导致系统每次重启时，都会清空这个目录。
        /usr            Linux系统中可能最大的一个目录，包含普通用户所需要的所有程序和文件。
        /usr/bin        包含系统安装的可执行程序。
        /usr/lib        包含由/usr/bin目录中的程序所用的共享库。
        /usr/local      非系统发行版自带程序的安装目录。
        /usr/sbin       包含许多系统管理程序。
        /usr/share      包含许多由/usr/bin目录中的程序使用的共享数据。
        /usr/share/doc  大多数安装在系统中的软件会包含一些文档，按软件包分类的文档保存在这。
        /var            除了/tmp和/home之外，目前其它的文件都是静态的，/var存放的是动态文件。数据库、假脱机文件、用户邮件等。
        /var/log        包含日志文件、各种系统活动的记录。

<h2 id="3">3.操作文件和目录</h2>
&emsp;&emsp; shell频繁的使用文件名，shell提供了特殊字符来快速指定一组文件名，这些字符叫做通配符。

        通配符：
        *               匹配任意多个字符(包括零个或一个)。
        ？              匹配任意一个字符(不包括零个)。
        [characters]    匹配任意一个属于字符集中的字符。
        [!characters]   匹配任意一个不是字符集中的字符。
        [[:class:]]     匹配任意一个属于指定字符类中的字符。

        通配符范例：
        *               所有文件。
        g*              文件名以"g"开头的文件。
        b*.txt          以"b"开头，中间有零个或任意多个字符，并以".txt"结尾的文件。
        Data???         以"Data"开头，其后紧接着3个字符的文件。
        [abc]*          文件名以"a"，"b"，或者"c"开头的文件。
        BACKUP.[0-9][0-9][0-9]  以"BACKUP."开头，并紧跟着3个数字的文件。
        [[:upper:]]*    以大写字母开头的文件。
        [![:digit:]]*   不以数字开头的文件。
        *[[:lower:]123]   文件以小写字母结尾，或者以"1"，或"2"，或"3"结尾的文件。

        字符类：
        [:alnum:]       匹配任意一个字母或数字。
        [:alpha:]       匹配任意一个字母。
        [:digit:]       匹配任意一个数字。
        [:lower:]       匹配任意一个小写字母。
        [:upper:]       匹配任意一个大写字母。

### 硬链接和符号链接
&emsp;&emsp; 每个文件默认会有一个硬链接，这个硬链接给予文件名字。每创建一个硬链接，就为一个文件创建了一个额外的目录项。
硬链接两个局限性：1，一个硬链接不能关联它所在文件系统之外的文件，一个硬链接不能关联与硬链接本身不在同一个磁盘分区上的文件。
2，一个硬链接不能关联一个目录。

<br>
&emsp;&emsp; 符号链接生效，是通过创建一个特殊类型的文件，这个文件包含一个关联文件或目录的文本指针。

<h2 id="4">4.使用命令</h2>
&emsp;&emsp; 命令是以下四种形式之一：1，一个可执行程序。2，一个内建于shell自身的命令。3，一个shell函数。4，一个命令别名。

<h2 id="5">5.重定向</h2>
&emsp;&emsp; 许多程序都会产生某种输出，这种输出通常由两种类型组成：1，程序运行结果，标准输出(stdout)。2，状态和错误信息，标准错误(stderr)。
">"重定向符后接文件名，将标准输出重定向到除屏幕以外的另一个文件， > file 可以清空文件内容。">>" 重定向符将输出结果添加到文件内容之后，
如果文件不存在，文件会被创建。

        shell内部将标准输入、输出、错误，分别称为文件描述符：0、1、2。
        ls -l /bin/usr 2> ls-error.txt  表示将标准错误重定向到ls-error.txt文件中。
        ls -l /bin/usr > ls-output.txt 2>&1 表示将标准输出和标准错误都重定向到一个文件中。
        ls -l /bin/usr &> ls-output.txt 现在的bash版本，可以用这种更精简的方法，重定向标准输出和错误到文件中。
        ls -l /bin/usr 2> /dev/null 扔掉错误输出，"/dev/null"特殊文件是系统设备，叫位存储桶，可以接收输入，并对输入不做任何处理。

        cat < lazy_dog.txt 使用"<" 重定向操作符，将标准输入源从键盘改到文件。

### 管道线
&emsp;&emsp; 命令从标准输入读取数据，并输送到标准输出的能力，被一个称为管道线的shell特性所利用。
使用"|"管道操作符，一个命令的标准输出可以通过管道送至另一个命令的标准输入。
        
        command1 | command2 
        ls -l /usr/bin | less 用less来一页页地显示任何命令的输出，命令把它的运行结果输送到标准输出。

### 过滤器
&emsp;&emsp; 把几个命令放在一起组成一个管道线，以这种方式使用的命令称为过滤器。
过滤器接受输入，以某种方式改变它，然后输出它。

        ls /usr/bin /bin | sort | less
        ls /bin /usr/bin | sort | uniq | less 使用uniq删除重复的行。
        ls /bin /usr/bin | sort | uniq | grep zip 找到包含"zip"单词的所有文件。
        ls /usr/bin | tee ls.txt | grep zip tee从标准输入读取数据，并输出到标准输出和文件。

<h2 id="6">6.shell特性</h2>
### 字符展开
&emsp;&emsp; 当执行命令之前，bash会将字符转换为别的字符，这个过程叫(字符)展开。
    
        echo *      打印当前工作目录下的文件名字。

### 路径展开
&emsp;&emsp; 通配符依赖的工作机制叫路径名展开。
    
        echo D*     打印所有D开头的文件。
        echo [[:upper:]]*       打印大写字符开头的文件。
        
        ls -d .* | less
        ls -d .[!.]?*       打印以"."开头，且第二个字符不为"."，且至少包含一个字符的文件。
        ls -A       打印隐藏文件。

### 算术表达式展开
&emsp;&emsp; shell在展开中执行算术表达式。
    
        $((expression)) 支持：+、-、*、/、%、**(取幂)。
        echo $((2 + 2))

### 花括号展开
&emsp;&emsp; 通过花括号，可以从一个包含花括号的模式中创建多个文本字符串。

        echo Front-{A,B,C}-Back     会分别打印出3个字符串。
        echo Number_{1..5}      
        echo {Z..A}
        echo a{A{1,2},B{3,4}}b

### 命令替换
&emsp;&emsp; 命令替换允许我们把一个命令的输出作为一个展开模式来使用。
    
        echo $(ls)
        ls -l $(which cp)
        ls -l `which cp`    倒引号等同于$()

### 引号
&emsp;&emsp; 双引号中特殊字符都失去特殊含义，例外：$、\、`(倒引号)。这意味着参数展开、算术展开、命令替换仍然执行。
单引号禁止所有的展开。可以使用"\"来转义字符。
    
        \a      响铃。
        \b      退格符。
        \n      新的一行。
        \r      回车符。
        \t      制表符。

<h2 id="7">7.键盘操作</h2>
### 移动光标

        Ctrl-a      移动光标到行首。
        Ctrl-e      移动光标到行尾。
        Ctrl-f      光标前移一个字符。
        Ctrl-b      光标后移一个字符。
        Alt-f       光标前移一个字。
        Alt-b       光标后移一个字。
        Ctrl-l      清空屏幕，移动光标到左上角。clear命令完成同样功能。

### 修改文本
        
        Ctrl-d      删除光标位置的字符。
        Ctrl-t      光标位置的字符和光标前面的字符互换位置。
        Alt-t       光标位置的字和其前面的字互换位置。
        Alt-l       把从光标位置到字尾的字符转换为小写字母。
        Alt-u       把从光标位置到字尾的字符转换为大写字母。

### 剪切和粘贴文本

        Ctrl-k      剪切从光标到行尾的文本。
        Ctrl-u      剪切从光标到行首的文本。
        Alt-d       剪切从光标到词尾的文本。
        Alt-Backspace       剪切从光标位置到词头的文本。
        Ctrl-y      把剪切环中的文本粘贴到光标位置。

### 历史命令
&emsp;&emsp; home目录.bash_history文件中，保存一个已经执行过的命令的历史列表。

        history | less 
        history | grep /usr/bin

        Ctrl-p      移动到上一个历史条目。
        Ctrl-n      移动到下一个历史条目。
        Alt-<       移动到历史列表开头。
        Alt->       移动到历史列表结尾。
        Ctrl-r      反向增量搜索。
        Alt-p       反向搜索，非增量搜索。
        Alt-n       向前搜索，非增量。
        Ctrl-o      执行历史列表中的当前项，并移动到下一个。

<h2 id="8">8.权限</h2>
&emsp;&emsp; 对于文件和目录的访问权力，是根据读访问、写访问、执行来定义的。

        -       一个普通文件。
        d       一个目录。
        l       一个符号链接。
        c       一个字符设备文件。按照字节流来处理数据的设备。
        b       一个块设备文件。按照数据块来处理数据的设备。

### chmod更改文件模式
&emsp;&emsp; chmod能更改文件或目录的模式，只有文件的所有者或超级用户才能更改文件或目录的模式。
chmod支持两种不同的方法来改变文件模式：八进制数字表示法或符号表示法。

        0       000     ---
        1       001     --x
        2       010     -w-
        3       011     -wx
        4       100     r--
        5       101     r-x
        6       110     rw-
        7       111     rwx

        对象类型：
        u       user的简写，指文件或目录的所有者。
        g       用户组。
        o       others的简写，指其他所有的人。
        a       all的简写，是u、g、o三者的联合。

        符号表示法：
        u+x     为文件所有者添加可执行权限。
        u-x     删除文件所有者的可执行权限。
        +x      为文件所有者、用户组和其他所有人添加可执行权限。等价a+x。
        o-rw    除了文件所有者、用户组，删除其他人的读权限和写权限。
        go=rw   给文件组和文件组、所有者以外的人，读写权限，且如果有执行权限，则移除。
        u+x,go=rw   给文件拥有者执行权限，并给文件组和其他人读和执行的权限。多中设定可以用逗号分开。

### chown更改文件所有者和用户组
    
        chown [owner][:[group]] file    这个命令使用时需要超级用户权限。

<h2 id="9">9.进程</h2>
&emsp;&emsp; 当系统启动时，内核先把自己的活动初始化为进程，然后运行init程序。
再运行一系列称为init脚本的shell脚本(位于/etc)。一个程序发动另一个程序被称为一个父进程可以产生一个子进程。

### ps查看进程

        ps      查看进程(process status)    
            PID(进程ID) TTY(进程的控制终端) TIME(进程消耗的CPU时间数量) CDM
        ps x    展示所有进程，不管由什么终端控制。
            PID     TTY     STAT        TIME        COMMAND
        ps aux
            USER PID %CPU %MEM VSZ(虚拟内存大小) RSS(物理内存大小) TTY STAT START(进程启动的时间) TIME COMMAND

        STAT状态值：
            R       运行中，进程正在运行或准备运行。
            S       正在睡眠，进程在等待一个事件。
            D       不可中断睡眠，进程在等待I/O。
            T       已停止。
            Z       一个死进程或僵尸进程，这是一个已经终止的子进程，但它的父进程还没清空它。
            <       一个高优先级进程，可能会授予一个进程更多的资源。
            N       低优先级进程，只有高优先级进程被服务后，才会得到处理器时间。

### top动态查看进程
&emsp;&emsp; ps命令查看的是执行时刻的机器状态快照。top程序以进程活动顺序，显示连续更新的系统进程列表。
top的显示结果由两部分组成，最上面的是系统概要，下面是进程列表。

### 后台执行进程
&emsp;&emsp; 为了启动一个程序并让它立即在后台运行，我们在程序命令之后，加上"&"字符。
shell的任务控制功能给出了一种列出从我们终端中启动了的任务的方法，执行jobs可以看到这个输出列表。

        xlogo &

### 进程返回到前台
&emsp;&emsp; 一个在后台运行的进程对于键盘输入是免疫的，而且不能用快捷键来中断，可以使用fg命令来让进程返回前台。

        fg %1       fg跟随一个百分号和任务序号，如果只有一个后台任务，那么%1是可有可无的。

### 停止一个进程
&emsp;&emsp; 我们可以使用Ctrl-z来停止一个前台进程，这么做是为了允许前台进程被移动到后台，而不是终止它。
使用fg命令可以恢复程序到前台运行，bg命令可以把程序移到后台。

        bg %1       bg跟fg一样可以跟一个任务序号，如果只有一个任务的话，%1参数是可选的。

### 信号
&emsp;&emsp; kill命令用来给程序发送信号。killall命令可以给多个进程发送信号。
kill命令和killall命令一样，都必须拥有超级用户权限才能给不属于你的进程发送信号。

        kill [-signal] PID
        killall [-u user] [-signal] name...

        pstree      输出一个树型的进程列表，这个列表展示进程间的父子关系。
        vmstat      输出一个系统资源使用快照，包括内存、交换分区、磁盘I/O。 vmstat 5表示：每5秒更新一次。
        xload       一个图形界面程序，可以画出系统负载随时间变化的图形。
        tload       与xload相似，但是在终端中画出图形，使用Ctrl-c来终止输出。


        pwd (print working directory): 显示当前工作目录。
        ls: 列出一个目录包含的文件及子目录。ls [dirName] 查看多个对应目录下的文件列表和子目录列表。
        ls -a: 可以列出"."开头的隐藏文件。
        ls -l: 列出目录包含的文件及子目录，以长模式输出。
        ls -t: 按照文件修改时间的先后来排序。
        cd: 更改当前工作目录。cd 更改目录到home目录。  
        cd -: 更改目录到你先前的工作目录。
        cd ~user_name: 更改目录到该用户的home目录。
        file filename: 打印文件内容的简单描述。
        less filename: 浏览文本文件，允许前后滚动，如果内容多于一页，可以上下滚动文件，按q退出less程序。
        mkdir [directory]: 创建目录。可以一次创建多个目录。
        cp item1 item2: 复制单个文件或目录"item1"，到文件或目录"item2"。
        cp [item] directory: 复制多个项目到一个目录下。
        mv item1 item2: 把文件或目录"item1"移动或重命名为"item2"。
        mv [item] directory: 把一个或多个条目从一个目录移动到另一个目录中。
        rm [item]: 移除一个或多个文件或目录。
        ln file link: 创建硬链接。
        ln -s item link: 创建符号链接。
        type command: 显示命令的类别。
        which command: 显示一个可执行程序的位置。只对可执行程序有效，不包括内建命令和命令别名。
        help command: 得到shell内建命令的帮助文档。
        command --help: 显示用法信息，很多可执行程序支持一个--help选项，用来显示命令所支持的语法和选项说明。
        man command: 显示程序手册页。许多被命令行使用的可执行程序，提供了一个正式的文档，叫做手册或手册页。
        apropos command: 显示适当的命令。
        whatis: 显示匹配特定关键字的手册的名字和一行命令说明。
        info command: 显示程序Info条目。
        alias aliasCommand='command': 用别名创建自己的命令。alias foo='cd /usr; ls; cd -'，多个命令用";"分割。
        unalias aliasCommand: 删除别名。
        alias: 查看所有定义在系统环境中的别名。
        cat [file]: 读取一个或多个文件，然后复制它们到标准输出。cat movie.mpeg.0* > movie.mpeg 将多个文件连接起来。
        wc file: 打印行数、字数、字节数。
        grep pattern [file]: 打印匹配行。
        head -n number file: 打印文件开头前n行。默认打印10行。
        tail -n number file: 打印文件结尾后n行。默认打印10行。
        chmod mode file: 更改文件模式。
        chown owner:group file: 更改文件所有者和用户组。
        passwd user: 更改用户密码。
        ps: 查看进程。
        kill [-signal] PID: 用来给给程序发送kill信号。
        kill -u user -signal [name]: 给匹配特定程序或用户名的多个进程发送信号。



        ls: 列出目录包含的文件及子目录。
            选项：     长选项：        描述：
            -a        --all          列出所有文件，包含隐藏文件。
            -d        --directory    把这个选项与-l结合使用，可以看到指定目录的详细信息，而不是目录中的内容。
            -F        --classify     在每个所列出的名字后加上一个指示符，名字是目录，则会加上一个'/'字符。
            -h        --human-readable 当以长格式列出时，以人们可读的格式而不是字节数来显示文件的大小。
            -l                       以长格式显示结果。
            -r        --reverse      以相反的顺序来显示结果，通常ls输出结果按照字母生序排列。
            -S                       命令输出结果按照文件大小排序。
            -t                       按照修改时间来排序。

        less：浏览文件内容。less是more的改进版，less属于页面调度器类程序，more只能向前翻页，less允许前后翻页，还有其它很多特性。
            Page UP or b        向上翻滚一页。
            Page Down or space  向下翻滚一页。
            UP Arrow            向上翻滚一行。
            Down Arrow          向下翻滚一行。
            G                   移动到最后一行。
            1G or g             移动到开头一行。
            /characters         向前查找指定的字符串。
            n                   向前查找下一个出现的字符串，这个字符串是之前所指定查找的。
            h                   显示帮助屏幕。
            q                   退出less程序。

        cp：复制文件和目录。
            -a      --archive       复制文件和目录，以及它们的属性，包括所有权和权限。
            -i      --interactive   在重写已存在文件之前，提示用户确认。不指定cp会默认重写文件。
            -r      --recursive     递归地复制目录及目录中的内容。
            -u      --update        复制文件时，仅复制目标目录中不存在的文件，或者文件内容新于目标目录中已经存在的文件。
            -v      --verbose       显示翔实的命令操作信息。
            
        mv: 移动和重命名文件。
            -i      --interactive       在重写一个已经存在的文件时，提示用户确认信息。不指定这个选项，会默认重写文件内容。
            -u      --update            移动文件时，仅移动目标目录中不存在的文件，或者文件内容新于目标目录中已经存在的文件。
            -v      --verbose           操作mv时，显示翔实的操作信息。

        rm: 删除文件和目录。
            -i      --interactive       在删除已存在的文件前，提示用户确认信息。如不指定，rm会默默删除文件。
            -r      --recursive         递归的删除文件，如果目录包含子目录，那么子目录也会被删除。
            -f      --force             忽视不存在的文件，不显示提示信息。这选项覆盖了"--interactive"选项。
            -v      --verbose           在执行命令时，显示翔实的操作信息。

        uniq: 忽略重复行。
            -d      查看重复的行。

        wc: 打印行数、字数、字节数。
            -l      只打印行数。
        
        grep: 打印匹配行。
            -i      忽略大小写。
            -v      只打印不匹配的行。

        tail: 打印文件结尾后n行。
            -f      继续监测这个文件，当内容添加到文件后，会立即出现在屏幕上。
        
        kill: 杀死程序。
            1       HUP     挂起(hangup)，守护进程使用这个信号来重新初始化，收到这个信号后，进程会重新启动，并重新读取它的配置文件。
            2       INT     中断，跟Ctrl-c一样的功能，由终端发送。
            9       KILL    杀死，KILL信号不被发送到目标程序，而是内核立即终止这个进程。无法做清理或保存工作。
            15      TERM    终止，这个kill命令默认发送的信号，如果程序还活着，那么会终止。
            18      CONT    继续，在一个停止信号后，这个信号会恢复进程的运行。
            19      STOP    停止，这个信号导致进程停止而不是终止，这个信号不被发送到目标进程，因此不能被忽略。
            3       QUIT    退出。
            11      SEGV    段错误(segmentation violation)，如果程序非法使用内存就会发送这个信号。
            20      TSTP    终端停止(terminal stop)，当按下Ctrl-z，终端会发送这个信号。
            28      WINCH   改变窗口大小(window change)，改变窗口大小时，系统会发送这个信号。